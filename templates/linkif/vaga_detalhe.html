{% extends "base.html" %}
{% load static %}

{% block title %}{{ vaga.titulo }} — LinkIF{% endblock %}

{% block content %}

<div class="container py-5">

    <div class="card shadow-sm border-0 rounded-4 overflow-hidden">

        

        <div class="card-body p-4">

            <!-- TÍTULO + EMPRESA -->
            <h3 class="fw-bold mb-1">{{ vaga.titulo }}</h3>

            <h6 class="text-muted mb-3">
                <i class="bi bi-buildings me-1"></i> 
                {{ vaga.empresa.nome }}
            </h6>

            <hr>

            <!-- INFORMAÇÕES PRINCIPAIS -->
            <p><strong>Curso alvo:</strong> {{ vaga.curso.nome|default:"Todos" }}</p>
            <p><strong>Modalidade:</strong> {{ vaga.get_modalidade_display }}</p>
            <p><strong>Tipo:</strong> {{ vaga.get_tipo_display }}</p>

            {% if vaga.remuneracao %}
                <p><strong>Bolsa / Remuneração:</strong> R$ {{ vaga.remuneracao }}</p>
            {% endif %}

            <p><strong>Cidade:</strong> {{ vaga.cidade }}{% if vaga.bairro %} — {{ vaga.bairro }}{% endif %}</p>

            {% if vaga.data_inicio or vaga.data_fim %}
                <p>
                    <strong>Período:</strong>
                    {% if vaga.data_inicio %}{{ vaga.data_inicio|date:"d/m/Y" }}{% endif %}
                    {% if vaga.data_fim %} até {{ vaga.data_fim|date:"d/m/Y" }}{% endif %}
                </p>
            {% endif %}

            <hr>

            <!-- REQUISITOS -->
            {% if vaga.requisitos %}
            <h5 class="fw-bold mt-4">Requisitos</h5>
            <p>{{ vaga.requisitos }}</p>
            {% endif %}

            <!-- DESCRIÇÃO -->
            <h5 class="fw-bold mt-4">Descrição da Vaga</h5>
            <p>{{ vaga.descricao }}</p>

            <div class="text-center mt-4">

                {% if user.is_authenticated and user.tipo == "aluno" %}
                    <a href="{% url 'linkif:candidatar_vaga' vaga.id %}" 
                       class="btn btn-success px-4">
                       <i class="bi bi-check-circle-fill me-1"></i> Candidatar-se
                    </a>

                {% elif user.is_authenticated %}
                    <button class="btn btn-secondary px-4" disabled>
                        <i class="bi bi-x-circle me-1"></i> Apenas alunos podem candidatar-se
                    </button>

                {% else %}
                    <a href="{% url 'usuarios:login' %}" 
                       class="btn btn-primary px-4">
                       <i class="bi bi-box-arrow-in-right me-1"></i> Entrar para candidatar-se
                    </a>
                {% endif %}

            </div>
        </div>
    </div>

</div>

{% endblock %}
