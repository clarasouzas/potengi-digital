{% extends "base.html" %}
{% load static %}

{% block title %}Para Estudantes — LinkIF{% endblock %}

{% block content %}

<!-- =====================================================
     HERO — REFEITO IGUAL AO SEU EXEMPLO
====================================================== -->
<section class="hero hero-estudante">

    <!-- wrapper interno limitado -->
    <div class="hero-inner">

        <!-- TEXTO -->
        <div class="text-area">
            <h1>Para Estudantes</h1>
            <p>Transforme seu potencial em oportunidades reais.</p>

            <div class="botoes">
                {% if not user.is_authenticated %}
                  <a href="{% url 'usuarios:cadastro' %}" class="botao-principal">
                    <i class="bi bi-person-add"></i> Criar Perfil
                  </a>

                {% elif user.tipo == 'aluno' %}
                  <a href="#vagas" class="botao-principal">
                    <i class="bi bi-search"></i> Explorar Vagas
                  </a>

                {% else %}
                  <a href="{% url 'linkif:explorar' %}" class="botao-principal">
                    <i class="bi bi-people-fill"></i> Explorar Estudantes
                  </a>
                {% endif %}
            </div>
        </div>

        <!-- IMAGEM -->
        <img src="{% static 'assets/img/estudante.svg' %}" class="hero-art">

    </div>

</section>





<!-- =====================================================
     O QUE OFERECEMOS
====================================================== -->
<section class="oferecemos py-5">
  <div class="container text-center">

    <h2 class="fw-bold" style="color:#1b1f5b;">O que oferecemos para você</h2>
    <p class="text-secondary mb-5">Funcionalidades feitas para te aproximar das melhores vagas.</p>

    <div class="row g-4 justify-content-center">

      <div class="col-md-3">
        <div class="feature-estudante-card icon-estudante-lilas h-100">
          <div class="feature-estudante-top">
            <div class="feature-estudante-icon"><i class="bi bi-person-circle"></i></div>
          </div>
          <h5 class="fw-bold mt-4">Monte seu Perfil</h5>
          <p class="mt-3 mx-auto" style="max-width:240px;">Mostre habilidades e experiências.</p>
        </div>
      </div>

      <div class="col-md-3">
        <div class="feature-estudante-card icon-estudante-verde h-100">
          <div class="feature-estudante-top">
            <div class="feature-estudante-icon"><i class="bi bi-building-check"></i></div>
          </div>
          <h5 class="fw-bold mt-4">Conecte-se a Empresas</h5>
          <p class="mt-3 mx-auto" style="max-width:240px;">Empresas do IFRN podem ver seu perfil.</p>
        </div>
      </div>

      <div class="col-md-3">
        <div class="feature-estudante-card icon-estudante-azul h-100">
          <div class="feature-estudante-top">
            <div class="feature-estudante-icon"><i class="bi bi-briefcase"></i></div>
          </div>
          <h5 class="fw-bold mt-4">Encontre Vagas</h5>
          <p class="mt-3 mx-auto" style="max-width:240px;">Acesso rápido a oportunidades reais.</p>
        </div>
      </div>

      <div class="col-md-3">
        <div class="feature-estudante-card icon-estudante-rosa h-100">
          <div class="feature-estudante-top">
            <div class="feature-estudante-icon"><i class="bi bi-mortarboard"></i></div>
          </div>
          <h5 class="fw-bold mt-4">Cresça com o IFRN</h5>
          <p class="mt-3 mx-auto" style="max-width:240px;">Ferramentas para te ajudar a evoluir.</p>
        </div>
      </div>

    </div>

  </div>
</section>





<!-- =====================================================
     LISTAGEM DE VAGAS
====================================================== -->
<section id="vagas" class="py-5">
  <div class="container">

    <div class="row g-4">

      <!-- FILTRO -->
      <div class="col-md-4">
        <div class="filtro-card p-4 h-100">
          <h5 class="fw-bold mb-3">Filtrar vagas</h5>

          <form method="get" class="d-flex flex-column gap-2">

            {{ filtro.form.titulo.label_tag }}
            {{ filtro.form.titulo }}

            {{ filtro.form.cidade.label_tag }}
            {{ filtro.form.cidade }}

            {{ filtro.form.tipo.label_tag }}
            {{ filtro.form.tipo }}

            {{ filtro.form.curso.label_tag }}
            {{ filtro.form.curso }}

            {{ filtro.form.modalidade.label_tag }}
            {{ filtro.form.modalidade }}

            <button class="btn w-100 mt-3" style="background:#0a7a79;color:white;">
              Aplicar Filtros
            </button>
          </form>
        </div>
      </div>


      <!-- LISTA DE VAGAS -->
      <div class="col-md-8">
        <div class="row g-4">

          {% for vaga in vagas %}
          <div class="col-md-6">
            <div class="vaga-card h-100">

              <div class="vaga-empresa">
                {% if vaga.empresa.foto %}
                  <img src="{{ vaga.empresa.foto.url }}" class="empresa-avatar">
                {% else %}
                  <div class="empresa-avatar-fallback">
                    <i class="bi bi-buildings"></i>
                  </div>
                {% endif %}
                <span class="empresa-nome">
                  {{ vaga.empresa.nome|default:vaga.empresa.email }}
                </span>
              </div>

              {% if vaga.data_publicacao %}
                <span class="vaga-data">{{ vaga.data_publicacao|date:"d/m/Y" }}</span>
              {% endif %}

              <h5 class="vaga-titulo fw-bold text-uppercase">{{ vaga.titulo }}</h5>

              <ul class="vaga-info">
                <li><i class="bi bi-geo-alt"></i> {{ vaga.cidade }}/RN</li>
                <li><i class="bi bi-briefcase"></i> {{ vaga.get_tipo_display }}</li>
                {% if vaga.remuneracao %}
                <li><i class="bi bi-cash"></i> R$ {{ vaga.remuneracao }}</li>
                {% endif %}
              </ul>

              <a href="{% url 'linkif:vaga_detalhe' vaga.id %}"
                 class="btn btn-primary w-100 mt-3">
                Ver detalhes
              </a>

            </div>
          </div>

          {% empty %}
          <p class="text-center text-muted">Nenhuma vaga encontrada.</p>
          {% endfor %}

        </div>

        <!-- PAGINAÇÃO -->
        <div class="mt-4">
          <nav aria-label="Paginação">
            <ul class="pagination justify-content-center">

              {% if vagas.has_previous %}
              <li class="page-item">
                <a class="page-link" href="?page={{ vagas.previous_page_number }}&{{ request.GET.urlencode }}">«</a>
              </li>
              {% endif %}

              <li class="page-item disabled">
                <span class="page-link">Página {{ vagas.number }} de {{ vagas.paginator.num_pages }}</span>
              </li>

              {% if vagas.has_next %}
              <li class="page-item">
                <a class="page-link" href="?page={{ vagas.next_page_number }}&{{ request.GET.urlencode }}">»</a>
              </li>
              {% endif %}

            </ul>
          </nav>
        </div>

      </div>

    </div>
  </div>
</section>


{% endblock %}
