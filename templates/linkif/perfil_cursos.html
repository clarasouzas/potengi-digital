{% extends 'base.html' %}
{% load static %}
{% block title %}Perfis de Formação - {{ site_config.nome_site }}{% endblock %}

{% block content %}

<div class="container py-5 text-center">
  
  <h2 class="fw-bold mb-4">Perfis de Formação</h2>
  <p class="text-secondary mb-5">
    Conheça os cursos e áreas do IFRN — Campus São Paulo do Potengi
  </p>

  <div class="row g-4 justify-content-center">

    {% for perfil in perfis %}
    <div class="col-md-4 d-flex">

      <div class="card border-0 shadow-sm rounded-4 w-100">

        <!-- IMAGEM -->
        {% if perfil.imagem %}
          <img src="{{ perfil.imagem.url }}" 
               alt="Imagem do curso {{ perfil.nome }}"
               class="w-100 rounded-top" 
               style="height:140px; object-fit:cover;">
        {% else %}
          <img src="{% static 'assets/img/perfil_informatica.png' %}" 
               alt="Imagem padrão do curso"
               class="w-100 rounded-top" 
               style="height:140px; object-fit:cover;">
        {% endif %}

        <!-- CORPO DO CARD -->
        <div class="card-body text-start p-4">

          <h5 class="fw-bold" style="color:{{ perfil.cor_titulo }};">
            {{ perfil.nome }}
          </h5>

          <p class="text-muted">
            {{ perfil.descricao|default:"Descrição ainda não cadastrada."|truncatechars:150 }}
          </p>

          <a href="{% url 'linkif:perfil_detalhe' perfil.id %}" 
             class="btn btn-sm text-white"
             style="background-color:{{ perfil.cor_titulo }};">
             Ver Detalhes
          </a>

        </div>
      </div>

    </div>
    {% empty %}
      <p class="text-muted">Nenhum perfil cadastrado ainda.</p>
    {% endfor %}

  </div>
</div>

{% endblock %}
