{% extends "dashboard/base_dashboard.html" %}
{% load static %}

{% block conteudo %}

<h2 class="page-title mb-4">Meu Perfil</h2>

<div class="card shadow-sm border-0 p-4">

    <div class="row g-4 align-items-center">

        <!-- =======================
             AVATAR + NOME
        =========================== -->
        <div class="col-md-4 text-center">

            <!-- Card visual do avatar -->
            <div class="p-4 rounded" style="background:#E7E8FB;">
                {% if foto %}
                    <img src="{{ foto }}" class="avatar-lg rounded-circle shadow-sm"
                         style="width:130px;height:130px;object-fit:cover;">
                {% else %}
                    <i class="{{ icone }} rounded-circle d-inline-flex justify-content-center align-items-center"
                       style="font-size:70px;width:130px;height:130px;background:white;color:#7a7a7a;"></i>
                {% endif %}
            </div>

            <h5 class="mt-3 mb-0 fw-semibold">
                {% if user.tipo == "aluno" %}
                    {{ user.aluno.nome }}
                {% elif user.tipo == "empresa" %}
                    {{ user.empresa.nome_empresa }}
                {% elif user.tipo == "coordenador" %}
                    {{ user.coordenador.nome }}
                {% endif %}
            </h5>

            <p class="text-muted small mb-3">{{ user.email }}</p>

            <a href="{% url 'dashboard:editar_perfil' %}" class="btn btn-outline-primary btn-sm">
                <i class="bi bi-pencil me-1"></i> Editar Perfil
            </a>

        </div>

        <!-- =======================
             INFORMAÇÕES (coluna)
        =========================== -->
        <div class="col-md-8">

            <div class="ps-md-4 border-start">

                <!-- E-mail -->
                <div class="mb-3">
                    <span class="label-title">E-mail</span>
                    <div class="value">{{ user.email }}</div>
                </div>

                {% if user.tipo == "aluno" %}
                <!-- Nome -->
                <div class="mb-3">
                    <span class="label-title">Nome</span>
                    <div class="value">{{ user.aluno.nome|default:"—" }}</div>
                </div>

                <!-- Curso -->
                <div class="mb-3">
                    <span class="label-title">Curso</span>
                    <div class="value">{{ user.aluno.curso|default:"—" }}</div>
                </div>

                <!-- Portfólio -->
                <div class="mb-3">
                    <span class="label-title">Portfólio</span>
                    <div class="value">
                        {% if user.aluno.portfolio %}
                            <a href="{{ user.aluno.portfolio }}" target="_blank">Abrir</a>
                        {% else %}
                            —
                        {% endif %}
                    </div>
                </div>

                {% elif user.tipo == "empresa" %}

                <div class="mb-3">
                    <span class="label-title">Nome da Empresa</span>
                    <div class="value">{{ user.empresa.nome_empresa|default:"—" }}</div>
                </div>

                <div class="mb-3">
                    <span class="label-title">CNPJ</span>
                    <div class="value">{{ user.empresa.cnpj }}</div>
                </div>

                <div class="mb-3">
                    <span class="label-title">Telefone</span>
                    <div class="value">{{ user.empresa.telefone }}</div>
                </div>

                <div class="mb-3">
                    <span class="label-title">Cidade</span>
                    <div class="value">{{ user.empresa.cidade }}</div>
                </div>

                <div class="mb-3">
                    <span class="label-title">Descrição</span>
                    <div class="value">{{ user.empresa.descricao|default:"—" }}</div>
                </div>

                {% elif user.tipo == "coordenador" %}

                <div class="mb-3">
                    <span class="label-title">Nome</span>
                    <div class="value">{{ user.coordenador.nome|default:"—" }}</div>
                </div>

                <div class="mb-3">
                    <span class="label-title">Setor</span>
                    <div class="value">{{ user.coordenador.setor|default:"—" }}</div>
                </div>

                {% endif %}

            </div>
        </div>

    </div>

</div>

{% endblock %}
