{% extends "dashboard/base_dashboard.html" %}
{% load static %}

{% block conteudo %}

<h2 class="title-dashboard mb-4">Meu Perfil</h2>

<div class="perfil-card shadow-sm">

    <div class="row g-4">

        <!-- ==========================
             FOTO + AÇÕES
        =========================== -->
        <div class="col-lg-4 text-center">

            <div class="perfil-foto-wrapper">
                {% if foto %}
                    <img src="{{ foto }}" class="perfil-foto">
                {% else %}
                    <div class="perfil-foto-placeholder">
                        <i class="{{ icone }}"></i>
                    </div>
                {% endif %}
            </div>

            <h5 class="mt-3 fw-semibold perfil-nome">
                {{ user.username }}
            </h5>

            <p class="perfil-email">{{ user.email }}</p>

            <a href="{% url 'dashboard:editar_perfil' %}" class="btn perfil-btn-editar">
                <i class="bi bi-pencil me-1"></i> Editar Perfil
            </a>

        </div>

        <!-- ==========================
             DADOS DO PERFIL
        =========================== -->
        <div class="col-lg-8">

            <div class="perfil-info">

                <!-- EMAIL -->
                <div class="perfil-item">
                    <span class="perfil-label">E-mail</span>
                    <div class="perfil-value">{{ user.email }}</div>
                </div>

                {% if user.tipo == "aluno" %}

                    <div class="perfil-item">
                        <span class="perfil-label">Nome</span>
                        <div class="perfil-value">{{ user.username }}</div>
                    </div>

                    <div class="perfil-item">
                        <span class="perfil-label">Curso</span>
                        <div class="perfil-value">{{ user.curso|default:"—" }}</div>
                    </div>

                    <div class="perfil-item">
                        <span class="perfil-label">Telefone</span>
                        <div class="perfil-value">
                            {{ user.telefone|default:"—" }}
                        </div>
                    </div>

                    <div class="perfil-item">
                        <span class="perfil-label">Resumo</span>
                        <div class="perfil-value">
                            {% if user.resumo %}
                                {{ user.resumo|linebreaksbr }}
                            {% else %}
                                —
                            {% endif %}
                        </div>
                    </div>

                    <div class="perfil-item">
                        <span class="perfil-label">Currículo</span>
                        <div class="perfil-value">
                            {% if user.curriculo %}
                                <a href="{{ user.curriculo.url }}" class="perfil-link" target="_blank">
                                    Ver currículo
                                </a>
                            {% else %}
                                —
                            {% endif %}
                        </div>
                    </div>

                    <div class="perfil-item">
                        <span class="perfil-label">Portfólio</span>
                        <div class="perfil-value">
                            {% if user.portfolio %}
                                <a href="{{ user.portfolio }}" class="perfil-link" target="_blank">
                                    Abrir portfólio
                                </a>
                            {% else %}
                                —
                            {% endif %}
                        </div>
                    </div>

                {% elif user.tipo == "empresa" %}

                    <div class="perfil-item">
                        <span class="perfil-label">Nome da Empresa</span>
                        <div class="perfil-value">{{ user.username }}</div>
                    </div>

                    <div class="perfil-item">
                        <span class="perfil-label">CNPJ</span>
                        <div class="perfil-value">{{ user.cnpj|default:"—" }}</div>
                    </div>

                    <div class="perfil-item">
                        <span class="perfil-label">Telefone</span>
                        <div class="perfil-value">{{ user.telefone|default:"—" }}</div>
                    </div>

                    <div class="perfil-item">
                        <span class="perfil-label">Cidade</span>
                        <div class="perfil-value">{{ user.cidade|default:"—" }}</div>
                    </div>

                    <div class="perfil-item">
                        <span class="perfil-label">Descrição</span>
                        <div class="perfil-value">
                            {{ user.descricao|default:"—" }}
                        </div>
                    </div>

                {% elif user.tipo == "coordenador" %}

                    <div class="perfil-item">
                        <span class="perfil-label">Nome</span>
                        <div class="perfil-value">{{ user.username }}</div>
                    </div>

                    <div class="perfil-item">
                        <span class="perfil-label">Setor</span>
                        <div class="perfil-value">{{ user.setor|default:"—" }}</div>
                    </div>

                {% endif %}

            </div>

        </div>

    </div>

</div>

{% endblock %}
