{% extends "dashboard/base_dashboard.html" %}
{% load static %}

{% block conteudo %}

<h2 class="page-title mb-4">Meu Perfil</h2>

<div class="card shadow-sm border-0 p-4">

    <div class="row g-4 align-items-center">

        <!-- ==========================
             FOTO + NOME
        =========================== -->
        <div class="col-md-4 text-center">

            <div class="p-4 rounded" style="background:#E7E8FB;">
                {% if foto %}
                    <img src="{{ foto }}" class="avatar-lg rounded-circle shadow-sm"
                    style="width:130px;height:130px;object-fit:cover;">
                {% else %}
                    <i class="{{ icone }} rounded-circle d-inline-flex justify-content-center align-items-center"
                    style="font-size:70px;width:130px;height:130px;background:white;color:#7a7a7a;"></i>
                {% endif %}
            </div>

            <h5 class="mt-3 mb-0 fw-semibold">
                {{ user.nome|default:user.email }}
            </h5>

            <p class="text-muted small mb-3">{{ user.email }}</p>

            <a href="{% url 'dashboard:editar_perfil' %}" class="btn btn-outline-primary btn-sm">
                <i class="bi bi-pencil me-1"></i> Editar Perfil
            </a>
        </div>

        <!-- ==========================
             INFORMAÇÕES
        =========================== -->
        <div class="col-md-8">

            <div class="ps-md-4 border-start">

                <!-- Tipo -->
                <div class="mb-3">
                    <span class="label-title">Tipo de Usuário</span>
                    <div class="value text-capitalize">{{ user.tipo }}</div>
                </div>

                <!-- Email -->
                <div class="mb-3">
                    <span class="label-title">E-mail</span>
                    <div class="value">{{ user.email }}</div>
                </div>

                <!-- CAMPOS PARA ALUNO -->
                {% if user.tipo == "aluno" %}

                <div class="mb-3">
                    <span class="label-title">Nome</span>
                    <div class="value">{{ user.nome|default:"—" }}</div>
                </div>

                <div class="mb-3">
                    <span class="label-title">Curso</span>
                    <div class="value">{{ user.curso|default:"—" }}</div>
                </div>

                <div class="mb-3">
                    <span class="label-title">Portfólio</span>
                    <div class="value">
                        {% if user.portfolio %}
                            <a href="{{ user.portfolio }}" target="_blank">Abrir portfólio</a>
                        {% else %}
                            —
                        {% endif %}
                    </div>
                </div>

                {% endif %}

                <!-- CAMPOS PARA EMPRESA -->
                {% if user.tipo == "empresa" %}

                <div class="mb-3">
                    <span class="label-title">Nome da Empresa</span>
                    <div class="value">{{ user.nome|default:"—" }}</div>
                </div>

                <div class="mb-3">
                    <span class="label-title">CNPJ</span>
                    <div class="value">{{ user.cnpj|default:"—" }}</div>
                </div>

                <div class="mb-3">
                    <span class="label-title">Telefone</span>
                    <div class="value">{{ user.telefone|default:"—" }}</div>
                </div>

                <div class="mb-3">
                    <span class="label-title">Cidade</span>
                    <div class="value">{{ user.cidade|default:"—" }}</div>
                </div>

                <div class="mb-3">
                    <span class="label-title">Descrição</span>
                    <div class="value">{{ user.descricao|default:"—" }}</div>
                </div>

                {% endif %}

                <!-- CAMPOS PARA COORDENAÇÃO -->
                {% if user.tipo == "coordenador" %}

                <div class="mb-3">
                    <span class="label-title">Nome</span>
                    <div class="value">{{ user.nome|default:"—" }}</div>
                </div>

                <div class="mb-3">
                    <span class="label-title">Setor</span>
                    <div class="value">{{ user.descricao|default:"—" }}</div>
                    {# você pode trocar para user.setor caso queira criar esse campo #}
                </div>

                {% endif %}

            </div>
        </div>

    </div>

</div>

{% endblock %}
