{% extends "dashboard/base_dashboard.html" %}
{% load static %}

{% block titulo %}Minhas Vagas{% endblock %}

{% block conteudo %}

<h2 class="title-dashboard mb-4">
    <i class="bi bi-briefcase me-2"></i> Minhas Vagas
</h2>

<!-- CRIAR VAGA (NÃO AJAX) -->
<div class="mb-3">
    <a href="{% url 'dashboard:coordenacao_cadastrar_vaga' %}"
       class="btn-table">
        <i class="bi bi-plus-circle me-1"></i> Nova vaga
    </a>
</div>

{% if vagas %}

<div class="row g-3">
{% for vaga in vagas %}
<div class="col-12 col-md-6 col-lg-4">

    <div class="card-list">

        <div class="card-title">{{ vaga.titulo }}</div>

        <div class="card-meta">
            <i class="bi bi-geo-alt me-1"></i>
            {{ vaga.cidade|default:"Cidade não informada" }}
        </div>

        <div class="mt-2">
            <span class="badge aprov">{{ vaga.get_status_display }}</span>
        </div>

        <div class="card-actions">

            <!-- DETALHAR (AJAX) -->
            <a href="#"
               class="btn-outline-action"
               data-vaga-detalhe="{% url 'dashboard:ajax_vaga_detalhe' vaga.id %}"
               data-modal="modal-vaga">
                <i class="bi bi-eye"></i> Ver
            </a>

            <!-- EDITAR (AJAX – ID OBRIGATÓRIO) -->
            <a href="#"
               class="btn-outline-action"
               data-vaga-form="{% url 'dashboard:ajax_vaga_form' vaga.id %}"
               data-modal="modal-vaga">
                <i class="bi bi-pencil"></i> Editar
            </a>

            <!-- EXCLUIR (AJAX) -->
            <a href="#"
               class="btn-outline-action text-danger"
               data-vaga-excluir="{% url 'dashboard:ajax_vaga_excluir' vaga.id %}"
               data-modal="modal-vaga">
                <i class="bi bi-trash"></i> Excluir
            </a>

        </div>

    </div>

</div>
{% endfor %}
</div>

{% else %}

{% endif %}

<!-- MODAL ÚNICO REUTILIZÁVEL -->
<div id="modal-vaga" class="modal-vaga">
    <div class="modal-content-vaga"></div>
</div>

{% endblock %}

{% block scripts %}
<script src="{% static 'js/script.js' %}"></script>
{% endblock %}
