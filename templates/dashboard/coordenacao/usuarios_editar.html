{% extends "dashboard/base_dashboard.html" %}
{% load crispy_forms_tags %}
{% load static %}

{% block conteudo %}

<h2 class="mb-4 d-flex align-items-center gap-2">
    Editar Usuário

    {% if usuario.is_superuser %}
    <span class="badge bg-warning text-dark">
        <i class="bi bi-shield-lock-fill"></i> Admin
    </span>
    {% endif %}
</h2>

<div class="card shadow-sm p-4 border-0 rounded-3">

    <!-- FOTO / AVATAR -->
    <div class="text-center mb-4">
        {% if usuario.foto %}
            <img src="{{ usuario.foto.url }}"
                 alt="Foto de Perfil"
                 class="rounded-circle shadow-sm"
                 style="width:130px;height:130px;object-fit:cover;">
        {% else %}
            <div class="rounded-circle bg-light d-flex justify-content-center align-items-center shadow-sm"
                 style="width:130px;height:130px;">
                <i class="bi bi-person-circle fs-1 text-secondary"></i>
            </div>
        {% endif %}
    </div>

    <!-- FORM -->
    <form method="post" enctype="multipart/form-data" class="mt-3">
        {% csrf_token %}

        <h5 class="fw-bold mb-3">Informações Básicas</h5>

        <div class="mb-4">
            {{ form|crispy }}
        </div>

        <!-- BOTÕES -->
        <div class="d-flex gap-3 mt-3">

            <button type="submit" class="btn btn-success w-100 py-2">
                <i class="bi bi-check-circle me-1"></i> Salvar Alterações
            </button>

            <a href="{% url 'dashboard:usuarios' %}"
               class="btn btn-outline-secondary w-100 py-2">
                <i class="bi bi-x-circle me-1"></i> Cancelar
            </a>

        </div>
    </form>

</div>

{% endblock %}
